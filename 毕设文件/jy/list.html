<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>电影列表</title>
<script src="js/tab.js"></script>
<link href="css/master.css" rel="stylesheet" />
</head>

<body>
<script src="/js/jquery-1.8.3.min.js" type="text/javascript"></script>
<link type="text/css" rel="stylesheet" href="/css/jqgrid.css" />
<link type="text/css" rel="stylesheet" href="/css/ui.css" />
<script src="/js/cookie.js?v=20160316" type="text/javascript"></script>
<script type="text/javascript" src="/js/common.js?v=20160316"></script>
<script src="/js/layer/layer.js?v=20160316"></script>
<script src="/js/web/login.js?v=20160316"></script>
<script src="/js/web/fastTicket/fastTicket.js?v=20160316"></script>
<script src="/js/jquery.js?v=20160316"></script>
<script src="/js/md5.js?v=20160316"></script>	
<script src="/js/ui/jquery.combo.js?v=20160316"></script>
<script src="/js/gotop.js?v=20160316"></script>
<!--图片放大 -->
<!-- <script type="text/javascript" -->

<!-- <script type="text/javascript" -->

<!-- <link rel="stylesheet" type="text/css" -->

<!-- </head> -->
<style>
	.fast_ticket_box ul li{
		cursor: pointer;
	}
</style>

<div class="header">
	<div class="header_inner pst">
		<div class="logo_box f_fl">
			<a href="/Index.jy"><img
				src="images/logo_header.png"
				alt="影店logo" /></a>
		</div>
		<div class="city_box f_fl pst" id="city_select">
			<span class="city_name f_fl" id="select_cityName"></span> <span
				class="city_arrow f_fl"></span>
			<div class="f_clear"></div>
			<div class="city_list" style="display: none;" id="city_list_div">
				<div class="hot_city">
					<dl>
						<dt>热门</dt>
						<dd id="hotCity"></dd>
						<div class="f_clear"></div>
					</dl>
				</div>
				<div class="city_info" id="city_info"></div>
			</div>
		</div>

		<ul class="nav_box f_fl">
			<li><a href='/Index.jy'>首页</a></li>
			<li><a href='/Film.jy/index' class='selected'>电影</a></li>
			<li><a href='/Cinema.jy/list'>影院</a></li>
			<li><a href='/Perform.jy/list'>演出</a></li>
			<li><a href='/ProductInfoForm.jy/list'>小卖部</a></li>
			<li><a href='/WebActive.jy/list'>发现</a></li>
			<div class="clear"></div>
		</ul>
		<div class="login_box f_fr">
			<div class="login" id="login-zhuce">
				<a href="javascript:void(0);" id="web_login">登录</a> <a href="/Register.jy/register">注册</a>
			</div>
			<!--
			<div class="my_info" id="user-userinfo">
				<a href="javascript:void(0);"> <span class="my_photo f_fl"><img
						src="" id="userHeadImg"/></span> <span
					class="my_name f_fl" id="user_nickName"></span> <span class="my_arrow f_fl"></span>
					<div class="f_clear"></div>
				</a>
				 <div class="my_yd" id="my_ydList" style="display: none;">
                	<ul>
                    	<li style="text-align: center;"><a href="/UserInfo.jy/info">个人信息</a></li>
                         <li><a href="#">订单管理</a></li> 
                        <li style="text-align: center;"><a href="javascript:existsUser();">退出</a></li>
                    </ul>
                </div>
				
			</div>
			-->
		</div>
		<a href="javascript:showFastTicket();" class="fast_ticket"><span>快速购票</span></a>
		<a id="gotop" href="javascript:void(0)" title="回到顶部"></a>
		<div class="f_clear"></div>
	</div>
</div>



<!--登录开始-->
<div class="login_layer" style="display: none;">
	<div class="mask_wrap"></div>
	<div class="login_info">
		<h3>
			<span class="f_fl">登录</span><span class="f_fr"><a href="javascript:;"
				class="btn_close" onclick="$('.login_layer').hide()"></a></span>
		</h3>
		<div class="lgoin_ipt">
			<dl>
				<dt class="user_id"></dt>
				<dd>
					<input name="userId" id="userId" type="text" placeholder="请输入手机号码/账号"
						class="ipt_txt" />
				</dd>
			</dl>
			<dl>
				<dt class="user_pw"></dt>
				<dd>
					<input name="password" id="password" type="password"
						placeholder="请输入登录密码" class="ipt_txt" />
				</dd>
			</dl>
			<dl id="login_code" style="display: none;">
				<dt class="user_code"></dt>
				<dd>
					<span id="codeSpan"> <input name="code" id="code"
						type="text" placeholder="请输入验证码" class="ipt_txt f_fl" style="width: 250px;" /> <img
						id="codeImg"  class=" f_fr" width="65" style="margin-top: 2px;"
								height="35" src="/WebLogin.jy/createCode"
						onclick="changeLoginCode()" title="看不清，换一张">
					</span>
				</dd>
			</dl>
			<p>
				<span class="f_fr"><a href="/Register.jy/forgetPwd">忘记密码？</a></span>
			<div class="f_clear"></div>
			<p>
				<a href="javascript:login();" class=" btn_login"><i>立即登录</i></a>
			</p>
			<p>
				还没有账号，<a href="/Register.jy/register">马上注册</a>
			</p>
		</div>
	</div>
</div>
<!--登录结束-->



<!-- 快速购票开始 -->
<div class="fast_ticket_layer" style="display: none;">
		<input type="hidden" id="fast_filmId" name="fast_filmId"/>
		<input type="hidden" id="fast_cinemaId" name="fast_cinemaId"/>
	
	<form id="film_selectSeat" action="/Film.jy/filmSeat" method="post" style="display:none ">
	<input type="hidden" id="filmId" name="filmId" value=""/>
	<input type="hidden" id="filmName" name="filmName" value=""/>
	<input type="hidden" id="cinemaCode" name="cinemaCode" value=""/>
	<input type="hidden" id="cinemaName" name="cinemaName" value=""/>
	<input type="hidden" id="cinemaLinkId" name="cinemaLinkId" value=""/>
	<input type="hidden" id="spCode" name="spCode" value=""/>
	<input type="hidden" id="showCode" name="showCode" value=""/>
	<input type="hidden" id="hallCode" name="hallCode" value=""/>
	<input type="hidden" id="hallName" name="hallName" value=""/>
	<input type="hidden" id="sectionId" name="sectionId" value=""/>
	<input type="hidden" id="showDate" name="showDate" value=""/>
	<input type="hidden" id="showTime" name="showTime" value=""/>
	<input type="hidden" id="price" name="price" value=""/>
	<input type="hidden" id="filmType" name="filmType" value=""/>
	<input type="hidden" id="activityId" name="activityId" value=""/>
	<input type="hidden" id="orderPrice" name="orderPrice" value=""/>
</form>
	
	
    <div class="mask_wrap"></div>
    <div class="ticket_infos">
        <div class="fast_head">
            <h3 class="fast_title">快速购票</h3>
            <a href="#" class="btn_close f_fr" onclick="$('.fast_ticket_layer').hide()"></a>
            <div class="f_clear"></div>
        </div>
        <div class="fast_ticket_box">
        	<div class="fast_movie_list">
            	<h3>热映电影</h3>
                <ul id="fast-filmList"></ul>
            </div>
            <div class="fast_cinema_list">
            	<h3>全部影院</h3>
            	<p align="left" style="margin-left: 5px;"><span id="hot-countyList"></span></p>
                <ul id="fast-cinemaList">
                	
                </ul>
            </div>
            <div class="fast_schedule_list">
            	<h3>影院排期</h3>
            	<p align="left" style="margin-left: 5px;">
                    	<span id="hot-cinemaTime"></span>
                    </p>
                <ul id="hot-filmShowsDate">
                	
                </ul>
            </div>
            <div class="fast_order_info">
            	<h3>订单信息</h3>
                <div class="fast_order_detail">
                	<div class="fast_order_photo">
               	    	<img src="" width="170" height="222" id="order-filmImg"/> 
                    </div>
                    <h4 id="order-filmName"></h4>
                    <p id="order-cinemaName"></p>
                    <p id="order-showsDate"></p>
                    <p id="order-showsTime"></p>
                    <p id="order-standPrice"></p>
                    <p id="order-price"></p>
                    <p style=" height:auto; border-top:1px #eee solid; padding:10px 0; margin-top:10px;" align="center"><input name="" type="button" style="cursor: pointer;" class="ui_btn_orange" value="选座购票" onclick='javascript:submitTicket();' /></p>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 快速购票结束 -->



	<div class=" wrapper">
		<!--电影列表开始-->
		<div class="film_box">
			<ul class="tab_tag" id="tags">
				<li class="selectTag"><a 
					onclick="changeTag(1,this)" href="javascript:void(0)">正在上映</a></li>
				<li><a onclick="changeTag(2,this);" href="javascript:void(0)">即将上映</a></li>
				<div class="f_clear"></div>
			</ul>

			<div id="tagContent" style="padding: 0;">
				<div class="tagContent selectTag" id="tagContent0">
					<ul class="film_list">
					
					</ul>
				</div>

			</div>
			

			<div class="page_box"></div>
			<div class="f_clear"></div>
		</div>
		<!--电影列表结束-->

	</div>
	<!--footer 开始-->
	
<div class="footer" id="yingdian_footer">
  <div class="footer_inner">
    	<div class="code_box">
        	<dl>
            	<dt><img src="/images/yd_download.png" width="100" height="100" /></dt>
                <dd>扫描下载APP</dd>
            </dl>
            <dl>
           	  <dt><img src="/images/yd_wx.png" width="100" height="100" /></dt>
                <dd>关注影店微信</dd>
            </dl>
            <div class=" f_clear"></div>
        </div>
        <div class="hot_line">
        	<p>客服热线</p>
            <h3>400-882-1711</h3> 
            
        </div>
        <div class="copy_right">
        	<p>合作运营：院线通</p>
            <p>Copyright &copy; 2010-2016 BaiHui. All Rights Reserved.</p>
            <p>版权所有：深圳市百慧文化发展有限公司 粤ICP备11055320号-1</p>
            <p><a href="/Index.jy/about">关于我们</a><a href="/Index.jy/legal">法律声明</a><a href="/Index.jy/copyright">版权声明</a></p>
        </div>
        <div class=" f_clear"></div>
    </div>
</div>


	<!--footer 结束-->
	<script type="text/javascript" src="/js/jquery.blockUI.js"></script>
	<script>
	var filmType = 1;
	window.onload = function(){
		getData(1);
	}
	function changeTag(type,selfObj){
		 var tag = document.getElementById("tags").getElementsByTagName("li");
		  var taglength = tag.length;
		  for(i=0; i<taglength; i++){
		    tag[i].className = "";
		  }
		  selfObj.parentNode.className = "selectTag";
		filmType = type;
		getData(1);
	}
	function getData(pageNum) {
		$.ajax({
			type : 'post',
			dataType : 'json',
			url : "/Film.jy/listAjax?filmType="+filmType+"&pageNum="+pageNum,
			success : function(data) {
				if(data.result == 1){
					var jsonList = data.jsonList;
					$(".film_list").html("");
					var html = "";
					for(var i = 0;i<jsonList.length;i++){
						var film = jsonList[i];
						var onword = "";
						if(film.oneWord != null){
							onword = film.oneWord;
						}
						html += "<li><div class=\"film_logo\"><a href=\"javascript:void(0)\" onclick=\"filmInfoDetail('"+film.title+"')\" >"; //图片路径
						html += "<img title=\""+film.title+"\" src=\""+film.imgUrl+"\" width=\"170\" height=\"222\" /></a></div>";
						html += "<div class=\"film_info\"><h4><a href=\"javascript:void(0)\" onclick=\"filmInfoDetail('"+film.title+"')\" >"+film.title+"<i>"+film.filmScore+"</i></a></h4>";
						html += "<h5><span class=\"quot_l\"></span><span class=\"comment\">"+onword+"</span><span class=\"quot_r\"></span><div class=\" f_clear\"></div></h5>";
						html += "<p><span>导演</span>"+film.director+"</p>";
						html += "<p><span>主演</span>"+film.actor+"</p>";
						html += "<p><span>类型</span>"+film.filmType+"</p>";
						html += "<p>"+film.duration+"分钟-"+film.language+"</p>";
						html += "<p>"+film.showDate+"上映</p></div>";
						if(filmType == 1){
							html += "<div class=\"film_price\"><p><input style=\"cursor: pointer;\" onclick=\"filmInfoDetail('"+film.title+"')\" name=\"\" type=\"button\" class=\" f_fr ui_btn_orange_large\" value=\"选座购票\" />";
						}else if(filmType == 2){
							if(film.activeId == 0){
								html += "<div class=\"film_price\"><p><input style=\"cursor: pointer;\" onclick=\"filmInfoDetail('"+film.title+"',1)\" name=\"\" type=\"button\" class=\" f_fr ui_btn_green_large\" value=\"查看详情\" />";
							}else{
								html += "<div class=\"film_price\"><p><input style=\"cursor: pointer;\" onclick=\"filmInfoDetail('"+film.title+"')\" name=\"\" type=\"button\" class=\" f_fr ui_btn_orange_large\" value=\"超前预售\" />";
							}
						}
						html += "</p></div><div class=\"f_clear\"></div></li>";
						
					}
					$(".film_list").html($(".film_list").html()+html);
					
					
					
					var pageNum = data.pageNum;
					var pageCount = data.pageCount;
					
					var pageHtml = "<ul><li class=\"pre\" onclick=\"getData(1)\"><a href=\"javascript:void(0)\" >首页</a></li>";
					pageHtml+="<li class=\"pre\" onclick=\"getData("+(pageNum-1<1?1:pageNum-1)+")\"><a href=\"javascript:void(0)\" >上一页</a></li>";
					
					//
					var begin = 0;
					var end = 0;
					if(pageCount>5){
							begin = pageNum-2;
							end = pageNum+2;
						if(pageNum <= 3){
							begin = 1;
							end = end >pageCount?pageCount:5;
						}
						if(pageNum > pageCount-2){
							begin = pageCount - 5;
							end = pageCount;
						}
					}else{
						begin = 1;
						end = pageCount;
					}
					
					//
					
					
					for(var i = begin ;i<=end;i++){
						if(i == pageNum){
							pageHtml+="<li class=\"present_page\" onclick=\"getData("+i+")\"><a href=\"javascript:void(0)\">"+i+"</a></li>";
						}else{
							pageHtml+="<li onclick=\"getData("+i+")\"><a href=\"javascript:void(0)\">"+i+"</a></li>";
						}
					}
					var n = (pageNum+1>pageCount?pageCount:pageNum+1);
					pageHtml+="<li class=\"pre\" onclick=\"getData("+n+")\"><a href=\"javascript:void(0)\" >下一页</a></li>";
					pageHtml+="<li class=\"next\" onclick=\"getData("+pageCount+")\"><a href=\"javascript:void(0)\" >末页</a></li></ul>";
					
					$(".page_box").html(pageHtml);
					
					window.scrollTo(0,0);
					$.unblockUI();
				}
				setFootStyle();
			},
			error : function() {
				setFootStyle();
			}
		});
	}
	function filmInfoDetail(title,type){
		if(!type){
			type = 0;
		}
		location.href='/Film.jy/detail?title='+encodeURI(encodeURI(title))+"&type="+type;
	}
	</script>
	
</body>

</html>

